操作設計
================================

## 宗旨
優先支持純鍵盤操作，其次支持純鼠標操作。

## 狀態
是否乾淨，是否處於合併中等。某些狀態下，某些模式和操作不可用。

## 模式
借鑑 vi 的多模式設計。以整體界面的顏色變化，醒目地體現當前模式。

### 操作風格
在非輸入模式下，所有鍵都是快捷鍵。所有快捷鍵都可自定義。
但都會遵循一個規則：大小寫相互呼應。
有時大小寫對應同一功能，小寫鍵進入*子命令模式*，需進一步確認執行。
大寫鍵則爲對應的強制/直接/免詢問版，按下後直接執行。
例如引用瀏覽模式下，在某個分支上按
<kbd>c</kbd> 進入*子命令模式*，準備檢出到此分支；
<kbd>C</kbd> 則直接檢出到此分支。
可在配置文件中添加默認選項，這些選項會應用於免詢問版，並在子命令模式下默認添加。

#### 概覽模式
即根模式，所有模式不斷 Esc 將退回到該模式。
按不同鍵進入其它模式。
界面顯示 **引用列表**、**樹狀圖**、**文件對比**、**內容對比**
引用列表聚焦於當前分支，樹狀圖聚焦於當前提交，文件對比和內容對比顯示當前改動。

#### 子命令模式
聚焦於執行　git 的某個子命令，並通常攜帶固定參數。通常爲別的模式下，通過小寫快捷鍵進入。
可使用快捷鍵添加或移除選項或附加參數，<kbd>Enter</kbd> 執行命令。

#### 引用瀏覽模式
通過 <kbd>v</kbd> 進入。
界面顯示 **引用列表**、**樹狀圖**、**引用日誌**、**文件對比**、**內容對比**
聚焦於引用列表項上，可上下移動，翻頁（半頁），<kbd>Home</kbd>/<kbd>End</kbd> 在當前子列表中的頭尾。
樹狀圖中高亮並中行顯示該引用，灰度显示与引用无关的提交。
引用日誌中顯示該引用的引用日誌。
文件對比和內容對比顯示某兩個引用的對比，默認前項爲 HEAD，後項爲 work tree。
<kbd>g</kbd> 聚焦到樹狀圖，並進入*提交瀏覽模式*，聚焦於當前引用對應的提交。
<kbd>p</kbd> 聚焦到樹狀圖，並進入*提交选取模式*，聚焦於當前引用對應的提交。
<kbd>c</kbd> 進入*子命令模式*，準備檢出到引用。
<kbd>C</kbd> 直接檢出到引用。
<kbd>d</kbd> 作爲對比前項。
<kbd>D</kbd> 作爲對比後項。
<kbd>s</kbd> 交換對比項。
<kbd>/</kbd> 查找。
<kbd>Esc</kbd> 回到概览模式

#### 提交瀏覽模式
通過 <kbd>g</kbd> 進入。
界面顯示 **引用列表**、**樹狀圖**
聚焦於樹狀圖中的某個提交上，中行高亮顯示。
引用列表中未包含該提交的引用灰度顯示，包含該提交的微高亮顯示，正處於該提交的高亮顯示。
<kbd>/</kbd> 查找。
<kbd>Esc</kbd> 回到概览模式

#### 提交选取模式
在引用浏览模式下，通過 <kbd>p</kbd> 進入。
界面顯示 **引用列表**、**樹狀圖**
保持引用的聚焦，灰度显示引用所包含的提交，正常显示可选取的提交。
<kbd>p</kbd> 选取或取消选取，<kbd>Enter</kbd>确认
<kbd>P</kbd> 选取并直接确认。
<kbd>Esc</kbd> 回到引用浏览模式


#### Index 操作模式
通過 <kbd>i</kbd> 進入。
界面顯示 **文件對比**、**內容對比**
聚焦於文件對比，
<kbd>a</kbd> 加入 index，進入 Index 精細操作模式
<kbd>A</kbd> 整個加入 index
<kbd>r</kbd> 移出 index，進入 Index 精細操作模式
<kbd>R</kbd> 整個移出 index
<kbd>c</kbd> 抹去改動，進入 Index 精細操作模式
<kbd>C</kbd> 只接抹去改動
<kbd>u</kbd> 撤銷
<kbd>U</kbd> 反撤銷
<kbd>Esc</kbd> 回到概览模式

#### Index 精細操作模式
從 Index 操作模式，通過 <kbd>a</kbd>、<kbd>r</kbd>、<kbd>c</kbd> 進入。
界面顯示 **文件對比**、**內容對比**
針對文件的某處改動進行操作。
<kbd>u</kbd> 撤銷
<kbd>U</kbd> 反撤銷
<kbd>Esc</kbd> 回到 Index 操作模式
